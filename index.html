<!-- 2.11. A√ß√µes gratuitas -->
                    <div class="form-group">
                        <label>2.11. As a√ß√µes ofertadas s√£o totalmente gratuitas?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="acoes_gratuitas" value="sim"> sim</label>
                            <label><input type="radio" name="acoes_gratuitas" value="nao"> n√£o</label>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="especificar_nao_gratuitas">Se n√£o, especifique:</label>
                                <input type="text" id="especificar_nao_gratuitas" name="especificar_nao_gratuitas">
                            </div>
                            <div class="form-group">
                                <label for="especificar_bpc">Recebe BPC. Especifique:</label>
                                <input type="text" id="especificar_bpc" name="especificar_bpc">
                            </div>
                        </div>
                    </div>

                    <!-- 2.12. Articula√ß√£o com a rede -->
                    <div class="form-group">
                        <label>2.12. Articula√ß√£o com a rede setorial SUAS e outras redes:</label>
                        
                        <div class="table-container">
                            <table class="articulacao-table">
                                <thead>
                                    <tr>
                                        <th>Tipo de Rede</th>
                                        <th>Sim</th>
                                        <th>N√£o</th>
                                        <th>Observa√ß√µes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>CRAS</td>
                                        <td><input type="radio" name="articulacao_cras" value="sim"></td>
                                        <td><input type="radio" name="articulacao_cras" value="nao"></td>
                                        <td><input type="text" name="obs_cras" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                    <tr>
                                        <td>CREAS</td>
                                        <td><input type="radio" name="articulacao_creas" value="sim"></td>
                                        <td><input type="radio" name="articulacao_creas" value="nao"></td>
                                        <td><input type="text" name="obs_creas" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                    <tr>
                                        <td>Sa√∫de</td>
                                        <td><input type="radio" name="articulacao_saude" value="sim"></td>
                                        <td><input type="radio" name="articulacao_saude" value="nao"></td>
                                        <td><input type="text" name="obs_saude" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                    <tr>
                                        <td>Educa√ß√£o</td>
                                        <td><input type="radio" name="articulacao_educacao" value="sim"></td>
                                        <td><input type="radio" name="articulacao_educacao" value="nao"></td>
                                        <td><input type="text" name="obs_educacao" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                    <tr>
                                        <td>Habita√ß√£o</td>
                                        <td><input type="radio" name="articulacao_habitacao" value="sim"></td>
                                        <td><input type="radio" name="articulacao_habitacao" value="nao"></td>
                                        <td><input type="text" name="obs_habitacao" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                    <tr>
                                        <td>Trabalho e Renda</td>
                                        <td><input type="radio" name="articulacao_trabalho" value="sim"></td>
                                        <td><input type="radio" name="articulacao_trabalho" value="nao"></td>
                                        <td><input type="text" name="obs_trabalho" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                    <tr>
                                        <td>Sistema de Justi√ßa</td>
                                        <td><input type="radio" name="articulacao_justica" value="sim"></td>
                                        <td><input type="radio" name="articulacao_justica" value="nao"></td>
                                        <td><input type="text" name="obs_justica" placeholder="Observa√ß√µes"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 2.13. Correspond√™ncia das a√ß√µes -->
                    <div class="form-group">
                        <label>2.13. As a√ß√µes efetivamente executadas correspondem √† oferta para a qual possui inscri√ß√£o?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="acoes_correspondem" value="sim"> sim</label>
                            <label><input type="radio" name="acoes_correspondem" value="nao"> n√£o</label>
                        </div>
                        <div class="form-group">
                            <label for="obs_acoes_correspondem">Observa√ß√µes:</label>
                            <textarea id="obs_acoes_correspondem" name="obs_acoes_correspondem" rows="3"></textarea>
                        </div>
                    </div>

                    <!-- 2.14. Metodologia -->
                    <div class="form-group">
                        <label>2.14. A forma de execu√ß√£o (metodologia) das a√ß√µes atende √†s diretrizes das regulamenta√ß√µes?</label>
                        <div class="radio-group">
                            <label><input type="radio" name="metodologia_adequada" value="sim"> sim</label>
                            <label><input type="radio" name="metodologia_adequada" value="nao"> n√£o</label>
                        </div>
                        <div class="form-group">
                            <label for="obs_metodologia">Observa√ß√µes:</label>
                            <textarea id="obs_metodologia" name="obs_metodologia" rows="3"></textarea>
                        </div>
                    </div>
                </div>

                <!-- 3. DO VOTO -->
                <div class="form-section">
                    <h3>‚öñÔ∏è 3. DO VOTO</h3>
                    
                    <div class="form-group">
                        <label>3.1. Quanto √†s an√°lises t√©cnicas, o Relator:</label>
                        <div class="radio-group">
                            <label><input type="radio" name="concordancia_analises" value="concorda"> concorda</label>
                            <label><input type="radio" name="concordancia_analises" value="discorda"> discorda</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>3.2. O(A) Conselheiro(a) vota pelo(a):</label>
                        <div class="voto-options">
                            <div>
                                <label><input type="radio" name="voto_final" value="Indeferimento"> Indeferimento do pedido</label>
                            </div>
                            <div>
                                <label><input type="radio" name="voto_final" value="Deferimento"> Deferimento do pedido</label>
                            </div>
                            <div>
                                <label><input type="radio" name="voto_final" value="Manuten√ß√£o"> Manuten√ß√£o da inscri√ß√£o</label>
                            </div>
                            <div>
                                <label><input type="radio" name="voto_final" value="Cancelamento"> Cancelamento da inscri√ß√£o</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="data_voto">Data do voto:</label>
                            <input type="date" id="data_voto" name="data_voto">
                        </div>
                        <div class="form-group">
                            <label for="nome_conselheiro">Conselheiro(a):</label>
                            <input type="text" id="nome_conselheiro" name="nome_conselheiro" required>
                        </div>
                    </div>
                </div>

                <!-- 4. ASSINATURA DIGITAL -->
                <div class="form-section assinatura-section">
                    <h3>üîí 4. ASSINATURA DIGITAL</h3>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <div style="margin: 20px 0; padding: 15px; background: #e6fffa; border-left: 4px solid #38a169; border-radius: 5px;">
                            <label style="display: flex; align-items: center; font-weight: 600;">
                                <input type="checkbox" id="declaracao_veracidade" name="declaracao_veracidade" required style="margin-right: 15px; transform: scale(1.5);">
                                <span>DECLARO que todas as informa√ß√µes s√£o verdadeiras e assumo responsabilidade pelo conte√∫do deste relat√≥rio.</span>
                            </label>
                        </div>
                    </div>

                    <div style="background: white; padding: 25px; border-radius: 10px; border: 2px solid #4299e1;">
                        <h4 style="color: #2b6cb0; margin-bottom: 20px;">üîê ASSINATURA DIGITAL</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cpf_conselheiro">CPF do Conselheiro:</label>
                                <input type="text" id="cpf_conselheiro" name="cpf_conselheiro" maxlength="14" required>
                            </div>
                            <div class="form-group">
                                <label for="senha_assinatura">Senha:</label>
                                <input type="password" id="senha_assinatura" name="senha_assinatura" required>
                            </div>
                        </div>
                        
                        <button type="button" onclick="assinarDigitalmente()" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                            üîí ASSINAR DOCUMENTO
                        </button>
                        
                        <div id="signatureInfo" class="signature-info">
                            <h5 style="color: #38a169;">‚úÖ DOCUMENTO ASSINADO</h5>
                            <p><strong>Conselheiro:</strong> <span id="signatoryName"></span></p>
                            <p><strong>Data/Hora:</strong> <span id="signatureDateTime"></span></p>
                            <p><strong>Hash:</strong> <span id="verificationHash"></span></p>
                        </div>
                    </div>
                </div>

                <!-- Bot√µes -->
                <div class="action-buttons">
                    <button type="button" class="btn btn-secondary" onclick="salvarRascunho()">üíæ Salvar</button>
                    <button type="button" class="btn btn-secondary" onclick="validarFormulario()">‚úÖ Validar</button>
                    <button type="button" class="btn btn-primary" onclick="gerarRelatorio()" id="btnRelatorio" disabled>üìÑ Gerar Relat√≥rio</button>
                    <button type="button" class="btn btn-danger" onclick="limparFormulario()">üóëÔ∏è Limpar</button>
                </div>
            </form>

            <!-- Se√ß√£o do Relat√≥rio -->
            <div id="reportSection" style="display: none; margin-top: 40px; padding: 30px; background: #f7fafc; border-radius: 15px;">
                <h2 style="text-align: center;">üìã RELAT√ìRIO DE FISCALIZA√á√ÉO</h2>
                <div id="reportContent"></div>
                <div class="action-buttons" style="margin-top: 30px;">
                    <button onclick="voltarFormulario()" class="btn btn-secondary">‚¨ÖÔ∏è Voltar</button>
                    <button onclick="imprimirRelatorio()" class="btn btn-primary">üñ®Ô∏è Imprimir / Salvar PDF</button>
                    <button onclick="abrirRelatorioNovaAba()" class="btn btn-success">üìÑ Abrir em Nova Aba</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifica√ß√µes -->
    <div id="notification" class="notification"></div>

    <script>
        // Vari√°veis globais
        let assinaturaValida = false;
        let hashDocumento = '';
        let numeroDocumento = '';

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Sistema CAS-DF iniciando...');
            
            const hoje = new Date().toISOString().split('T')[0];
            const dataVisita = document.getElementById('data_visita');
            const dataVoto = document.getElementById('data_voto');
            
            if (dataVisita) dataVisita.value = hoje;
            if (dataVoto) dataVoto.value = hoje;
            
            gerarNumeroDocumento();
            aplicarMascaras();
            monitorarValidacoes();
            
            mostrarNotificacao('‚úÖ Sistema CAS-DF carregado com sucesso!', 'success');
        });

        function gerarNumeroDocumento() {
            const ano = new Date().getFullYear();
            const contador = localStorage.getItem('cas_contador') || '0';
            const novoContador = String(parseInt(contador) + 1).padStart(4, '0');
            numeroDocumento = 'CAS-DF-' + ano + '-' + novoContador;
            localStorage.setItem('cas_contador', novoContador);
        }

        function aplicarMascaras() {
            const cnpjInput = document.getElementById('cnpj_entidade');
            if (cnpjInput) {
                cnpjInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    value = value.replace(/(\d{2})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d)/, '$1/$2');
                    value = value.replace(/(\d{4})(\d{1,2})$/, '$1-$2');
                    e.target.value = value;
                });
            }

            const cpfInput = document.getElementById('cpf_conselheiro');
            if (cpfInput) {
                cpfInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d)/, '$1.$2');
                    value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                    e.target.value = value;
                });
            }
        }

        function monitorarValidacoes() {
            const btnRelatorio = document.getElementById('btnRelatorio');
            const checkDeclaracao = document.getElementById('declaracao_veracidade');
            
            if (checkDeclaracao) {
                checkDeclaracao.addEventListener('change', verificarLiberacao);
            }
            
            setInterval(verificarLiberacao, 500);
        }

        function verificarLiberacao() {
            const btnRelatorio = document.getElementById('btnRelatorio');
            const checkDeclaracao = document.getElementById('declaracao_veracidade');
            
            if (btnRelatorio && checkDeclaracao) {
                const declaracao = checkDeclaracao.checked;
                
                if (declaracao && assinaturaValida) {
                    btnRelatorio.disabled = false;
                    btnRelatorio.style.opacity = '1';
                    btnRelatorio.style.cursor = 'pointer';
                } else {
                    btnRelatorio.disabled = true;
                    btnRelatorio.style.opacity = '0.5';
                    btnRelatorio.style.cursor = 'not-allowed';
                }
            }
        }

        function gerarHash() {
            try {
                const dados = new FormData(document.getElementById('fiscalizacaoForm'));
                const objeto = {};
                
                for (let [key, value] of dados.entries()) {
                    objeto[key] = value;
                }
                
                const texto = JSON.stringify(objeto);
                const textoLimpo = texto
                    .normalize('NFD')
                    .replace(/[\u0300-\u036f]/g, '')
                    .replace(/[^\x00-\x7F]/g, '');
                
                let hash = 0;
                for (let i = 0; i < textoLimpo.length; i++) {
                    const char = textoLimpo.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash;
                }
                
                const timestamp = new Date().getTime().toString(36);
                return Math.abs(hash).toString(16).toUpperCase().padStart(8, '0') + timestamp.slice(-4).toUpperCase();
            } catch (error) {
                console.error('Erro ao gerar hash:', error);
                return new Date().getTime().toString(16).toUpperCase().padStart(12, '0');
            }
        }

        function assinarDigitalmente() {
            const cpf = document.getElementById('cpf_conselheiro').value.trim();
            const senha = document.getElementById('senha_assinatura').value.trim();
            const conselheiro = document.getElementById('nome_conselheiro').value.trim();
            
            if (!cpf || !senha || !conselheiro) {
                mostrarNotificacao('‚ùå Preencha todos os campos para assinar', 'error');
                return;
            }
            
            if (senha.length < 4) {
                mostrarNotificacao('‚ùå Senha deve ter pelo menos 4 caracteres', 'error');
                return;
            }

            if (cpf.replace(/\D/g, '').length !== 11) {
                mostrarNotificacao('‚ùå CPF deve ter 11 d√≠gitos', 'error');
                return;
            }

            try {
                const agora = new Date().toLocaleString('pt-BR');
                hashDocumento = gerarHash();
                
                document.getElementById('signatoryName').textContent = conselheiro;
                document.getElementById('signatureDateTime').textContent = agora;
                document.getElementById('verificationHash').textContent = hashDocumento;
                document.getElementById('signatureInfo').style.display = 'block';
                
                assinaturaValida = true;
                verificarLiberacao();
                
                mostrarNotificacao('‚úÖ Documento assinado com sucesso!', 'success');
            } catch (error) {
                console.error('Erro na assinatura:', error);
                mostrarNotificacao('‚ùå Erro ao assinar documento', 'error');
            }
        }

        function validarFormulario() {
            let erros = [];

            const campos = [
                { id: 'nome_entidade', nome: 'Nome da Entidade' },
                { id: 'cnpj_entidade', nome: 'CNPJ' },
                { id: 'data_visita', nome: 'Data da Visita' },
                { id: 'nome_recebeu', nome: 'Nome de quem recebeu' },
                { id: 'funcao_recebeu', nome: 'Fun√ß√£o' },
                { id: 'nome_conselheiro', nome: 'Nome do Conselheiro' }
            ];
            
            campos.forEach(campo => {
                const elemento = document.getElementById(campo.id);
                if (!elemento || !elemento.value.trim()) {
                    erros.push(campo.nome + ' √© obrigat√≥rio');
                }
            });

            const servicos = document.querySelectorAll('input[name="tipoServico"]:checked');
            if (servicos.length === 0) {
                erros.push('Selecione pelo menos um servi√ßo');
            }

            const horario = document.querySelector('input[name="horario_visita"]:checked');
            if (!horario) {
                erros.push('Selecione o hor√°rio da visita');
            }

            const endereco1 = document.querySelector('input[name="endereco_1"]');
            if (!endereco1 || !endereco1.value.trim()) {
                erros.push('Preencha pelo menos o primeiro endere√ßo');
            }

            if (erros.length > 0) {
                mostrarNotificacao('‚ùå Erros: ' + erros.join(', '), 'error', 8000);
                return false;
            }

            mostrarNotificacao('‚úÖ Formul√°rio v√°lido!', 'success');
            return true;
        }

        function salvarRascunho() {
            try {
                const dados = new FormData(document.getElementById('fiscalizacaoForm'));
                const objeto = {};
                
                for (let [key, value] of dados.entries()) {
                    objeto[key] = value;
                }
                
                localStorage.setItem('cas_rascunho', JSON.stringify(objeto));
                mostrarNotificacao('üíæ Rascunho salvo!', 'success');
            } catch (error) {
                console.error('Erro ao salvar:', error);
                mostrarNotificacao('‚ùå Erro ao salvar', 'error');
            }
        }

        function gerarRelatorio() {
            if (!validarFormulario()) return;

            if (!assinaturaValida) {
                mostrarNotificacao('‚ùå Assine o documento antes de gerar o relat√≥rio', 'error');
                return;
            }

            try {
                const dados = new FormData(document.getElementById('fiscalizacaoForm'));
                const formulario = {};
                
                for (let [key, value] of dados.entries()) {
                    if (formulario[key]) {
                        if (Array.isArray(formulario[key])) {
                            formulario[key].push(value);
                        } else {
                            formulario[key] = [formulario[key], value];
                        }
                    } else {
                        formulario[key] = value;
                    }
                }

                const servicos = Array.from(document.querySelectorAll('input[name="tipoServico"]:checked')).map(s => s.value);
                const formasAcesso = Array.from(document.querySelectorAll('input[name="formasAcesso"]:checked')).map(f => f.value);
                const especialidades = Array.from(document.querySelectorAll('input[name="especialidades"]:checked')).map(e => e.value);

                let relatorio = '<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 800px; margin: 0 auto; padding: 20px;">';
                
                // Cabe√ßalho
                relatorio += '<div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #1e3c72; padding-bottom: 20px;">';
                relatorio += '<h1 style="margin: 0; color: #1e3c72; font-size: 24px;">üèõÔ∏è CONSELHO DE ASSIST√äNCIA SOCIAL DO DISTRITO FEDERAL</h1>';
                relatorio += '<p style="margin: 5px 0; font-size: 14px;">SEPN Quadra 515 Lote 02 Bloco B, 4¬∫ andar - Asa Norte/DF - CEP 70.770-502</p>';
                relatorio += '<p style="margin: 5px 0; font-size: 14px;">E-mail: Cas_df@sedes.df.gov.br</p>';
                relatorio += '<h2 style="margin: 15px 0; color: #2d3748; font-size: 20px;">RELAT√ìRIO DE FISCALIZA√á√ÉO</h2>';
                relatorio += '<p style="margin: 5px 0; font-weight: bold; font-size: 16px;">Documento: ' + numeroDocumento + '</p>';
                relatorio += '</div>';
                
                // 1. Documentos
                if (formulario.pareceres_tecnicos || formulario.notas_tecnicas || formulario.plano_acao_ano || formulario.relatorio_atividades_ano) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üìã 4. SERVI√áOS ANALISADOS</h3>';
                    relatorio += '<ul style="margin: 10px 0; padding-left: 20px;">';
                    servicos.forEach(s => relatorio += '<li style="margin-bottom: 5px;">' + s + '</li>');
                    relatorio += '</ul>';
                    relatorio += '</div>';
                }
                
                // 5. Formas de Acesso
                if (formasAcesso.length > 0) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #38b2ac;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üö™ 5. FORMAS DE ACESSO</h3>';
                    relatorio += '<ul style="margin: 10px 0; padding-left: 20px;">';
                    formasAcesso.forEach(f => relatorio += '<li style="margin-bottom: 5px;">' + f + '</li>');
                    relatorio += '</ul>';
                    relatorio += '</div>';
                }

                // 6. Especialidades
                if (especialidades.length > 0) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #ed8936;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üë• 6. ESPECIALIDADES</h3>';
                    relatorio += '<ul style="margin: 10px 0; padding-left: 20px;">';
                    especialidades.forEach(e => relatorio += '<li style="margin-bottom: 5px;">' + e + '</li>');
                    relatorio += '</ul>';
                    if (formulario.outras_especialidades) {
                        relatorio += '<p><strong>Outras:</strong> ' + formulario.outras_especialidades + '</p>';
                    }
                    relatorio += '</div>';
                }
                
                // 7. Infraestrutura
                let infraInfo = [];
                if (formulario.tipo_espaco) infraInfo.push('Espa√ßo: ' + formulario.tipo_espaco);
                if (formulario.acessibilidade) {
                    infraInfo.push('Acessibilidade: ' + (formulario.acessibilidade === 'sim' ? 'Sim' : 'N√£o'));
                    if (formulario.obs_acessibilidade) infraInfo.push('Obs. Acessibilidade: ' + formulario.obs_acessibilidade);
                }
                if (formulario.compartilha_espaco) {
                    infraInfo.push('Compartilha espa√ßo: ' + (formulario.compartilha_espaco === 'sim' ? 'Sim' : 'N√£o'));
                    if (formulario.obs_compartilhamento) infraInfo.push('Obs. Compartilhamento: ' + formulario.obs_compartilhamento);
                }
                if (formulario.espaco_satisfatorio) {
                    infraInfo.push('Espa√ßo satisfat√≥rio: ' + (formulario.espaco_satisfatorio === 'sim' ? 'Sim' : 'N√£o'));
                    if (formulario.obs_espaco) infraInfo.push('Obs. Espa√ßo: ' + formulario.obs_espaco);
                }
                
                if (infraInfo.length > 0) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #4299e1;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üèóÔ∏è 7. INFRAESTRUTURA</h3>';
                    infraInfo.forEach(info => relatorio += '<p>‚Ä¢ ' + info + '</p>');
                    relatorio += '</div>';
                }

                // 8. Car√°ter Cont√≠nuo
                if (formulario.atividades_continuas || formulario.recesso_ferias) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #38a169;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üìÖ 8. CAR√ÅTER CONT√çNUO</h3>';
                    if (formulario.atividades_continuas) relatorio += '<p>‚Ä¢ Atividades dez a dez: ' + (formulario.atividades_continuas === 'sim' ? 'Sim' : 'N√£o') + '</p>';
                    if (formulario.recesso_ferias) relatorio += '<p>‚Ä¢ Recesso/f√©rias: ' + (formulario.recesso_ferias === 'sim' ? 'Sim' : 'N√£o') + '</p>';
                    relatorio += '</div>';
                }

                // 9. A√ß√µes Gratuitas
                if (formulario.acoes_gratuitas) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #e53e3e;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üí∞ 9. A√á√ïES GRATUITAS</h3>';
                    relatorio += '<p>‚Ä¢ Totalmente gratuitas: ' + (formulario.acoes_gratuitas === 'sim' ? 'Sim' : 'N√£o') + '</p>';
                    if (formulario.especificar_nao_gratuitas) relatorio += '<p>‚Ä¢ Especifica√ß√£o: ' + formulario.especificar_nao_gratuitas + '</p>';
                    if (formulario.especificar_bpc) relatorio += '<p>‚Ä¢ BPC: ' + formulario.especificar_bpc + '</p>';
                    relatorio += '</div>';
                }

                // 10. Articula√ß√£o com a Rede
                let articulacaoInfo = [];
                if (formulario.articulacao_cras) articulacaoInfo.push('CRAS: ' + (formulario.articulacao_cras === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_cras ? ' - ' + formulario.obs_cras : ''));
                if (formulario.articulacao_creas) articulacaoInfo.push('CREAS: ' + (formulario.articulacao_creas === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_creas ? ' - ' + formulario.obs_creas : ''));
                if (formulario.articulacao_saude) articulacaoInfo.push('Sa√∫de: ' + (formulario.articulacao_saude === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_saude ? ' - ' + formulario.obs_saude : ''));
                if (formulario.articulacao_educacao) articulacaoInfo.push('Educa√ß√£o: ' + (formulario.articulacao_educacao === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_educacao ? ' - ' + formulario.obs_educacao : ''));
                if (formulario.articulacao_habitacao) articulacaoInfo.push('Habita√ß√£o: ' + (formulario.articulacao_habitacao === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_habitacao ? ' - ' + formulario.obs_habitacao : ''));
                if (formulario.articulacao_trabalho) articulacaoInfo.push('Trabalho e Renda: ' + (formulario.articulacao_trabalho === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_trabalho ? ' - ' + formulario.obs_trabalho : ''));
                if (formulario.articulacao_justica) articulacaoInfo.push('Sistema de Justi√ßa: ' + (formulario.articulacao_justica === 'sim' ? 'Sim' : 'N√£o') + (formulario.obs_justica ? ' - ' + formulario.obs_justica : ''));
                
                if (articulacaoInfo.length > 0) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #805ad5;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üîó 10. ARTICULA√á√ÉO COM A REDE</h3>';
                    articulacaoInfo.forEach(info => relatorio += '<p>‚Ä¢ ' + info + '</p>');
                    relatorio += '</div>';
                }

                // 11. Correspond√™ncia das A√ß√µes
                if (formulario.acoes_correspondem || formulario.obs_acoes_correspondem) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #3182ce;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üìä 11. CORRESPOND√äNCIA DAS A√á√ïES</h3>';
                    if (formulario.acoes_correspondem) relatorio += '<p>‚Ä¢ Correspondem √† inscri√ß√£o: ' + (formulario.acoes_correspondem === 'sim' ? 'Sim' : 'N√£o') + '</p>';
                    if (formulario.obs_acoes_correspondem) relatorio += '<p>‚Ä¢ Observa√ß√µes: ' + formulario.obs_acoes_correspondem + '</p>';
                    relatorio += '</div>';
                }

                // 12. Metodologia
                if (formulario.metodologia_adequada || formulario.obs_metodologia) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #065f46;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üéØ 12. METODOLOGIA</h3>';
                    if (formulario.metodologia_adequada) relatorio += '<p>‚Ä¢ Atende diretrizes: ' + (formulario.metodologia_adequada === 'sim' ? 'Sim' : 'N√£o') + '</p>';
                    if (formulario.obs_metodologia) relatorio += '<p>‚Ä¢ Observa√ß√µes: ' + formulario.obs_metodologia + '</p>';
                    relatorio += '</div>';
                }
                
                // 13. Voto do Conselheiro
                relatorio += '<div style="margin-bottom: 25px; background: #fff3cd; padding: 20px; border-radius: 8px; border: 2px solid #ffc107;">';
                relatorio += '<h3 style="color: #2d3748; margin-top: 0;">‚öñÔ∏è 13. VOTO DO CONSELHEIRO</h3>';
                if (formulario.concordancia_analises) relatorio += '<p><strong>An√°lises t√©cnicas:</strong> ' + (formulario.concordancia_analises === 'concorda' ? 'Concorda' : 'Discorda') + '</p>';
                if (formulario.voto_final) relatorio += '<p><strong>Decis√£o:</strong> ' + formulario.voto_final + '</p>';
                relatorio += '</div>';
                
                // 14. Assinatura Digital
                relatorio += '<div style="margin-top: 40px; padding: 25px; background: #f0fff4; border: 3px solid #48bb78; border-radius: 10px;">';
                relatorio += '<h3 style="color: #38a169; margin-top: 0; text-align: center;">‚úÖ DOCUMENTO ASSINADO DIGITALMENTE</h3>';
                relatorio += '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">';
                relatorio += '<p><strong>Conselheiro:</strong> ' + (formulario.nome_conselheiro || 'N√£o informado') + '</p>';
                relatorio += '<p><strong>Data/Hora:</strong> ' + document.getElementById('signatureDateTime').textContent + '</p>';
                relatorio += '</div>';
                relatorio += '<p style="text-align: center;"><strong>Hash:</strong> <code style="background: #e2e8f0; padding: 5px 10px; border-radius: 5px;">' + hashDocumento + '</code></p>';
                relatorio += '</div>';
                
                // 15. Assinatura Final
                relatorio += '<div style="margin-top: 50px; text-align: center; border-top: 2px solid #ccc; padding-top: 30px;">';
                relatorio += '<p style="margin-bottom: 20px;"><strong>Data do Voto:</strong> ' + (formulario.data_voto ? new Date(formulario.data_voto + 'T00:00:00').toLocaleDateString('pt-BR') : new Date().toLocaleDateString('pt-BR')) + '</p>';
                relatorio += '<div style="margin-top: 80px; border-top: 2px solid #333; width: 400px; margin-left: auto; margin-right: auto; padding-top: 15px;">';
                relatorio += '<p style="margin: 8px 0; font-weight: bold; font-size: 16px;">' + (formulario.nome_conselheiro || 'Nome do Conselheiro') + '</p>';
                relatorio += '<p style="margin: 8px 0; font-size: 14px;">Conselheiro(a) do CAS-DF</p>';
                relatorio += '</div>';
                relatorio += '</div>';
                
                relatorio += '</div>';

                document.getElementById('reportContent').innerHTML = relatorio;
                document.getElementById('reportSection').style.display = 'block';
                document.getElementById('fiscalizacaoForm').style.display = 'none';
                
                window.scrollTo({top: 0, behavior: 'smooth'});
                
                mostrarNotificacao('‚úÖ Relat√≥rio gerado com sucesso!', 'success');
                
            } catch (error) {
                console.error('Erro ao gerar relat√≥rio:', error);
                mostrarNotificacao('‚ùå Erro ao gerar relat√≥rio', 'error');
            }
        }

        function voltarFormulario() {
            document.getElementById('reportSection').style.display = 'none';
            document.getElementById('fiscalizacaoForm').style.display = 'block';
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function imprimirRelatorio() {
            try {
                const conteudo = document.getElementById('reportContent').innerHTML;
                
                if (!conteudo || conteudo.trim() === '') {
                    mostrarNotificacao('‚ùå Gere o relat√≥rio primeiro!', 'error');
                    return;
                }
                
                const janelaImpressao = window.open('', '_blank', 'width=900,height=700');
                
                janelaImpressao.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Relat√≥rio CAS-DF - ${numeroDocumento}</title>
                        <meta charset="UTF-8">
                        <style>
                            * { margin: 0; padding: 0; box-sizing: border-box; }
                            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; line-height: 1.5; color: #333; }
                            h1, h2, h3 { color: #1e3c72; page-break-after: avoid; }
                            p { margin: 8px 0; }
                            ul { margin: 10px 0; padding-left: 25px; }
                            li { margin-bottom: 6px; }
                            .controls { position: fixed; top: 10px; right: 10px; background: white; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
                            .btn { padding: 8px 15px; margin: 3px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; }
                            @media print { 
                                .controls { display: none; }
                                body { margin: 0; padding: 15mm; font-size: 12px; }
                                h1, h2, h3 { color: #000; }
                            }
                        </style>
                    </head>
                    <body>
                        <div class="controls">
                            <button class="btn" onclick="window.print()">üñ®Ô∏è Imprimir</button>
                            <button class="btn" onclick="window.close()">‚ùå Fechar</button>
                        </div>
                        ${conteudo}
                        <div style="margin-top: 40px; text-align: center; color: #666; font-size: 12px; border-top: 1px solid #ccc; padding-top: 20px;">
                            Documento gerado em: ${new Date().toLocaleString('pt-BR')}
                        </div>
                    </body>
                    </html>
                `);
                
                janelaImpressao.document.close();
                janelaImpressao.focus();
                
                mostrarNotificacao('‚úÖ Janela de impress√£o aberta!', 'success');
                
            } catch (error) {
                console.error('Erro ao imprimir:', error);
                mostrarNotificacao('‚ùå Erro ao abrir impress√£o', 'error');
            }
        }

        function abrirRelatorioNovaAba() {
            try {
                const conteudo = document.getElementById('reportContent').innerHTML;
                
                if (!conteudo || conteudo.trim() === '') {
                    mostrarNotificacao('‚ùå Gere o relat√≥rio primeiro!', 'error');
                    return;
                }
                
                const novaAba = window.open('', '_blank');
                
                novaAba.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Relat√≥rio CAS-DF - ${numeroDocumento}</title>
                        <meta charset="UTF-8">
                        <style>
                            body { font-family: Arial, sans-serif; margin: 40px auto; max-width: 800px; line-height: 1.6; color: #333; padding: 20px; }
                            h1, h2, h3 { color: #1e3c72; }
                            .controls { position: fixed; top: 20px; right: 20px; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
                            .btn { padding: 10px 16px; margin: 5px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; }
                            @media print { .controls { display: none; } }
                        </style>
                    </head>
                    <body>
                        <div class="controls">
                            <button class="btn" onclick="window.print()">üñ®Ô∏è Imprimir</button>
                            <button class="btn" onclick="window.close()">‚ùå Fechar</button>
                        </div>
                        ${conteudo}
                    </body>
                    </html>
                `);
                
                novaAba.document.close();
                mostrarNotificacao('‚úÖ Relat√≥rio aberto em nova aba!', 'success');
                
            } catch (error) {
                console.error('Erro ao abrir nova aba:', error);
                mostrarNotificacao('‚ùå Erro ao abrir nova aba', 'error');
            }
        }

        function limparFormulario() {
            if (confirm('Tem certeza que deseja limpar todos os dados?')) {
                document.getElementById('fiscalizacaoForm').reset();
                assinaturaValida = false;
                hashDocumento = '';
                
                const signatureInfo = document.getElementById('signatureInfo');
                if (signatureInfo) signatureInfo.style.display = 'none';
                
                localStorage.removeItem('cas_rascunho');
                verificarLiberacao();
                
                mostrarNotificacao('üóëÔ∏è Formul√°rio limpo!', 'info');
            }
        }

        function mostrarNotificacao(mensagem, tipo = 'info', duracao = 4000) {
            const notification = document.getElementById('notification');
            const icones = { success: '‚úÖ', error: '‚ùå', info: '‚ÑπÔ∏è' };
            
            if (notification) {
                notification.innerHTML = (icones[tipo] || '‚ÑπÔ∏è') + ' ' + mensagem;
                notification.className = 'notification ' + tipo;
                notification.classList.add('show');
                
                setTimeout(() => notification.classList.remove('show'), duracao);
            }
        }

        // Auto-save a cada 5 minutos
        setInterval(function() {
            const nomeEntidade = document.getElementById('nome_entidade');
            if (nomeEntidade && nomeEntidade.value.trim()) {
                salvarRascunho();
            }
        }, 300000);

        // Atalhos de teclado
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 's') {
                event.preventDefault();
                salvarRascunho();
            }
        });

        console.log('‚úÖ Sistema CAS-DF carregado com sucesso! Todas as funcionalidades ativas.');
    </script>
</body>
</html>üìÑ 1. DOCUMENTOS DISPONIBILIZADOS</h3>';
                    if (formulario.pareceres_tecnicos) relatorio += '<p><strong>Parecer(s) T√©cnico(s) n¬∫:</strong> ' + formulario.pareceres_tecnicos + '</p>';
                    if (formulario.notas_tecnicas) relatorio += '<p><strong>Nota(s) T√©cnica(s) n¬∫:</strong> ' + formulario.notas_tecnicas + '</p>';
                    if (formulario.plano_acao_ano) relatorio += '<p><strong>Plano de A√ß√£o Ano:</strong> ' + formulario.plano_acao_ano + '</p>';
                    if (formulario.relatorio_atividades_ano) relatorio += '<p><strong>Relat√≥rio de Atividades Ano:</strong> ' + formulario.relatorio_atividades_ano + '</p>';
                    relatorio += '</div>';
                }
                
                // 2. Dados da Entidade
                relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #48bb78;">';
                relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üìã 2. DADOS DA ENTIDADE</h3>';
                relatorio += '<p><strong>Entidade:</strong> ' + (formulario.nome_entidade || 'N√£o informado') + '</p>';
                relatorio += '<p><strong>CNPJ:</strong> ' + (formulario.cnpj_entidade || 'N√£o informado') + '</p>';
                relatorio += '</div>';
                
                // 3. Dados da Visita
                relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #f56565;">';
                relatorio += '<h3 style="color: #2d3748; margin-top: 0;">üè¢ 3. DADOS DA VISITA</h3>';
                relatorio += '<p><strong>Data:</strong> ' + (formulario.data_visita ? new Date(formulario.data_visita + 'T00:00:00').toLocaleDateString('pt-BR') : 'N√£o informado') + '</p>';
                relatorio += '<p><strong>Hor√°rio:</strong> ' + (formulario.horario_visita || 'N√£o informado') + '</p>';
                relatorio += '<p><strong>Respons√°vel:</strong> ' + (formulario.nome_recebeu || 'N√£o informado') + ' - ' + (formulario.funcao_recebeu || 'N√£o informado') + '</p>';
                
                if (formulario.endereco_1) {
                    relatorio += '<p><strong>Endere√ßo 1:</strong> ' + formulario.endereco_1;
                    if (formulario.licenca_1) relatorio += ' | Licen√ßa: ' + (formulario.licenca_1 === 'sim' ? 'Sim' : 'N√£o');
                    relatorio += '</p>';
                }
                if (formulario.endereco_2) {
                    relatorio += '<p><strong>Endere√ßo 2:</strong> ' + formulario.endereco_2;
                    if (formulario.licenca_2) relatorio += ' | Licen√ßa: ' + (formulario.licenca_2 === 'sim' ? 'Sim' : 'N√£o');
                    relatorio += '</p>';
                }
                
                // P√∫blico-alvo
                let publicoInfo = [];
                if (formulario.cdi_idosos) publicoInfo.push('Idosos (CDI/DF): ' + (formulario.cdi_idosos === 'sim' ? 'Sim' : 'N√£o'));
                if (formulario.cdca_criancas) publicoInfo.push('Crian√ßas/Adolescentes (CDCA/DF): ' + (formulario.cdca_criancas === 'sim' ? 'Sim' : 'N√£o'));
                if (formulario.cdi_familias) publicoInfo.push('Fam√≠lias (CDI/DF): ' + (formulario.cdi_familias === 'sim' ? 'Sim' : 'N√£o'));
                if (formulario.cdca_familias) publicoInfo.push('Fam√≠lias (CDCA/DF): ' + (formulario.cdca_familias === 'sim' ? 'Sim' : 'N√£o'));
                
                if (publicoInfo.length > 0) {
                    relatorio += '<h4>P√∫blico-alvo:</h4>';
                    publicoInfo.forEach(info => relatorio += '<p>‚Ä¢ ' + info + '</p>');
                }
                
                // Recursos humanos
                if (formulario.num_voluntarios || formulario.num_contratados) {
                    relatorio += '<h4>Recursos Humanos:</h4>';
                    if (formulario.num_voluntarios) relatorio += '<p>‚Ä¢ Volunt√°rios: ' + formulario.num_voluntarios + '</p>';
                    if (formulario.num_contratados) relatorio += '<p>‚Ä¢ Contratados: ' + formulario.num_contratados + '</p>';
                }
                
                relatorio += '</div>';
                
                // 4. Servi√ßos Analisados
                if (servicos.length > 0) {
                    relatorio += '<div style="margin-bottom: 25px; background: #f8fafc; padding: 15px; border-radius: 8px; border-left: 4px solid #9f7aea;">';
                    relatorio += '<h3 style="color: #2d3748; margin-top: 0;"><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema CAS-DF - Relat√≥rio de Fiscaliza√ß√£o</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2.2em; margin-bottom: 10px; }
        .content { padding: 40px; }
        .form-section { margin-bottom: 40px; padding: 25px; border: 2px solid #e1e8ed; border-radius: 15px; background: #f8fafc; }
        .form-section h3 { color: #2d3748; margin-bottom: 20px; font-size: 1.4em; border-bottom: 3px solid #667eea; padding-bottom: 10px; }
        .form-group { margin-bottom: 20px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #4a5568; }
        input, select, textarea { width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 16px; transition: all 0.3s ease; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .btn { padding: 15px 30px; border: none; border-radius: 25px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-secondary { background: #e2e8f0; color: #4a5568; }
        .btn-success { background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); color: white; }
        .btn-danger { background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%); color: white; }
        .action-buttons { display: flex; gap: 15px; justify-content: center; margin-top: 40px; flex-wrap: wrap; }
        .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin-top: 15px; }
        .checkbox-item { display: flex; align-items: flex-start; padding: 12px; background: white; border: 2px solid #e2e8f0; border-radius: 10px; }
        .checkbox-item input { width: auto; margin-right: 10px; transform: scale(1.2); }
        .radio-group { display: flex; gap: 20px; margin: 10px 0; flex-wrap: wrap; }
        .radio-group label { display: flex; align-items: center; margin-bottom: 0; }
        .table-container { overflow-x: auto; margin: 20px 0; }
        .form-table { width: 100%; border-collapse: collapse; margin-top: 15px; font-size: 14px; }
        .form-table th, .form-table td { border: 1px solid #e2e8f0; padding: 12px 8px; text-align: center; vertical-align: middle; }
        .form-table th { background: #f7fafc; font-weight: 600; color: #2d3748; }
        .form-table td:first-child { text-align: left; font-weight: 500; }
        .endereco-container { background: white; padding: 20px; border-radius: 10px; border: 2px solid #e2e8f0; margin-top: 10px; }
        .endereco-linha { display: grid; grid-template-columns: auto 1fr auto; gap: 15px; align-items: start; margin: 20px 0; padding: 15px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; }
        .endereco-numero { font-weight: 600; font-size: 16px; color: #4a5568; min-width: 25px; padding-top: 8px; }
        .endereco-input { width: 100%; border: none; border-bottom: 2px solid #e2e8f0; background: transparent; padding: 10px 5px; font-size: 15px; }
        .licenca-group { display: flex; flex-direction: column; gap: 8px; min-width: 180px; }
        .licenca-label { font-size: 12px; font-weight: 600; color: #4a5568; }
        .licenca-options { display: flex; gap: 15px; }
        .radio-inline { display: flex; align-items: center; gap: 5px; font-size: 14px; margin: 0; cursor: pointer; }
        .articulacao-table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 14px; }
        .articulacao-table th, .articulacao-table td { border: 1px solid #e2e8f0; padding: 12px; text-align: center; }
        .articulacao-table td:first-child { text-align: left; font-weight: 500; background: #f9f9f9; }
        .articulacao-table input[type="text"] { width: 100%; padding: 8px; border: 1px solid #e2e8f0; border-radius: 5px; font-size: 12px; }
        .notification { position: fixed; top: 20px; right: 20px; padding: 15px 25px; border-radius: 10px; color: white; font-weight: 600; z-index: 1001; opacity: 0; transform: translateX(100%); transition: all 0.3s ease; max-width: 400px; }
        .notification.show { opacity: 1; transform: translateX(0); }
        .notification.success { background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); }
        .notification.error { background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%); }
        .notification.info { background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%); }
        .correcao-badge { display: inline-block; background: #48bb78; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 10px; }
        .assinatura-section { border: 3px solid #f56565; background: #fef5e7; }
        .signature-info { display: none; margin-top: 20px; padding: 20px; background: #f0fff4; border: 2px solid #48bb78; border-radius: 10px; }
        .voto-options { margin: 15px 0; }
        .voto-options > div { margin-bottom: 10px; padding: 10px; background: white; border: 1px solid #e2e8f0; border-radius: 8px; }
        @media (max-width: 768px) {
            .endereco-linha { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; }
            .checkbox-grid { grid-template-columns: 1fr; }
            .action-buttons { flex-direction: column; align-items: center; }
            .btn { width: 100%; max-width: 300px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèõÔ∏è CONSELHO DE ASSIST√äNCIA SOCIAL DO DISTRITO FEDERAL</h1>
            <p>SEPN Quadra 515 Lote 02 Bloco B, 4¬∫ andar - Asa Norte/DF - CEP 70.770-502</p>
            <p>E-mail: Cas_df@sedes.df.gov.br</p>
            <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                <strong>‚úÖ SISTEMA COMPLETO - VERS√ÉO FINAL</strong>
            </div>
        </div>

        <div class="content">
            <form id="fiscalizacaoForm">
                <!-- SERVI√áOS ANALISADOS -->
                <div class="form-section">
                    <h3>üìã Este voto analisar√° o seguinte servi√ßo: <span class="correcao-badge">FICHA OFICIAL</span></h3>
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <p style="margin-bottom: 15px; font-weight: 600;">Marque a(s) op√ß√£o(√µes) correspondente(s):</p>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" id="acoes_assessoramento" name="tipoServico" value="1. A√ß√µes de Assessoramento">
                                <label for="acoes_assessoramento">1. A√ß√µes de Assessoramento</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="acoes_defesa" name="tipoServico" value="2. A√ß√µes de Defesa e Garantia de Direitos">
                                <label for="acoes_defesa">2. A√ß√µes de Defesa e Garantia de Direitos</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="promocao_integracao" name="tipoServico" value="3. Promo√ß√£o da integra√ß√£o ao mundo do trabalho">
                                <label for="promocao_integracao">3. Promo√ß√£o da integra√ß√£o ao mundo do trabalho</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="servico_convivencia" name="tipoServico" value="4. Servi√ßo de Conviv√™ncia e Fortalecimento de V√≠nculos">
                                <label for="servico_convivencia">4. Servi√ßo de Conviv√™ncia e Fortalecimento de V√≠nculos</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="servico_protecao_5" name="tipoServico" value="5. Servi√ßo de Prote√ß√£o e Atendimento Especializado a Fam√≠lias e Indiv√≠duos">
                                <label for="servico_protecao_5">5. Servi√ßo de Prote√ß√£o e Atendimento Especializado a Fam√≠lias e Indiv√≠duos</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="servico_protecao_6" name="tipoServico" value="6. Servi√ßo de Prote√ß√£o e Atendimento Especializado a Mulheres">
                                <label for="servico_protecao_6">6. Servi√ßo de Prote√ß√£o e Atendimento Especializado a Mulheres</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="servico_medidas_7" name="tipoServico" value="7. Servi√ßo de Prote√ß√£o Social a Adolescentes em Cumprimento de Medida Socioeducativa">
                                <label for="servico_medidas_7">7. Servi√ßo de Prote√ß√£o Social a Adolescentes em Cumprimento de Medida Socioeducativa</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="abordagem_social" name="tipoServico" value="8. Servi√ßo de Abordagem Social">
                                <label for="abordagem_social">8. Servi√ßo de Abordagem Social</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="acolhimento" name="tipoServico" value="9. Servi√ßo de Acolhimento">
                                <label for="acolhimento">9. Servi√ßo de Acolhimento</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 1. DOCUMENTOS DISPONIBILIZADOS -->
                <div class="form-section">
                    <h3>üìÑ 1. DOCUMENTOS DISPONIBILIZADOS:</h3>
                    <div class="form-group">
                        <label for="pareceres_tecnicos">Parecer(s) T√©cnico(s) n¬∫:</label>
                        <input type="text" id="pareceres_tecnicos" name="pareceres_tecnicos">
                    </div>
                    <div class="form-group">
                        <label for="notas_tecnicas">Nota(s) T√©cnica(s) n¬∫:</label>
                        <input type="text" id="notas_tecnicas" name="notas_tecnicas">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="plano_acao_ano">Plano de A√ß√£o Ano:</label>
                            <input type="number" id="plano_acao_ano" name="plano_acao_ano" min="2020" max="2030">
                        </div>
                        <div class="form-group">
                            <label for="relatorio_atividades_ano">Relat√≥rio de Atividades Ano:</label>
                            <input type="number" id="relatorio_atividades_ano" name="relatorio_atividades_ano" min="2020" max="2030">
                        </div>
                    </div>
                </div>

                <!-- 2. DA VISITA -->
                <div class="form-section">
                    <h3>üè¢ 2. DA VISITA</h3>

                    <!-- Dados da Entidade -->
                    <div class="form-group">
                        <label style="font-size: 1.1em; color: white; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 10px 15px; border-radius: 8px; display: inline-block; margin-bottom: 20px;">üìã Dados da Entidade Visitada:</label>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="nome_entidade">Nome da Entidade:</label>
                                <input type="text" id="nome_entidade" name="nome_entidade" required>
                            </div>
                            <div class="form-group">
                                <label for="cnpj_entidade">CNPJ:</label>
                                <input type="text" id="cnpj_entidade" name="cnpj_entidade" maxlength="18" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="data_visita">2.1. Data:</label>
                            <input type="date" id="data_visita" name="data_visita" required>
                        </div>
                        <div class="form-group">
                            <label>2.2. Hor√°rio:</label>
                            <div class="radio-group">
                                <label><input type="radio" name="horario_visita" value="matutino"> matutino</label>
                                <label><input type="radio" name="horario_visita" value="vespertino"> vespertino</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="nome_recebeu">2.3. Nome de quem recebeu o conselheiro:</label>
                            <input type="text" id="nome_recebeu" name="nome_recebeu" required>
                        </div>
                        <div class="form-group">
                            <label for="funcao_recebeu">Fun√ß√£o:</label>
                            <input type="text" id="funcao_recebeu" name="funcao_recebeu" required>
                        </div>
                    </div>

                    <!-- 2.4. Endere√ßos -->
                    <div class="form-group">
                        <label>2.4. Endere√ßo(s) visitado(s):</label>
                        <div class="endereco-container">
                            <div class="endereco-linha">
                                <div class="endereco-numero">1:</div>
                                <div>
                                    <input type="text" name="endereco_1" class="endereco-input" placeholder="Endere√ßo completo" required>
                                </div>
                                <div class="licenca-group">
                                    <span class="licenca-label">Licen√ßa de Funcionamento:</span>
                                    <div class="licenca-options">
                                        <label class="radio-inline"><input type="radio" name="licenca_1" value="sim"> Sim</label>
                                        <label class="radio-inline"><input type="radio" name="licenca_1" value="nao"> N√£o</label>
                                    </div>
                                </div>
                            </div>
                            <div class="endereco-linha">
                                <div class="endereco-numero">2:</div>
                                <div>
                                    <input type="text" name="endereco_2" class="endereco-input" placeholder="Endere√ßo completo (se houver)">
                                </div>
                                <div class="licenca-group">
                                    <span class="licenca-label">Licen√ßa de Funcionamento:</span>
                                    <div class="licenca-options">
                                        <label class="radio-inline"><input type="radio" name="licenca_2" value="sim"> Sim</label>
                                        <label class="radio-inline"><input type="radio" name="licenca_2" value="nao"> N√£o</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2.5. P√∫blico-alvo -->
                    <div class="form-group">
                        <label>2.5. P√∫blico-alvo:</label>
                        <div class="table-container">
                            <table class="form-table">
                                <thead>
                                    <tr>
                                        <th>P√∫blico</th>
                                        <th>CDI/DF</th>
                                        <th>CDCA/DF</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Pessoas idosas (mais de 60 anos)</td>
                                        <td>
                                            <label><input type="radio" name="cdi_idosos" value="sim"> sim</label>
                                            <label><input type="radio" name="cdi_idosos" value="nao"> n√£o</label>
                                        </td>
                                        <td>n√£o se aplica</td>
                                    </tr>
                                    <tr>
                                        <td>Crian√ßas e adolescentes (at√© 18 anos)</td>
                                        <td>n√£o se aplica</td>
                                        <td>
                                            <label><input type="radio" name="cdca_criancas" value="sim"> sim</label>
                                            <label><input type="radio" name="cdca_criancas" value="nao"> n√£o</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Fam√≠lias</td>
                                        <td>
                                            <label><input type="radio" name="cdi_familias" value="sim"> sim</label>
                                            <label><input type="radio" name="cdi_familias" value="nao"> n√£o</label>
                                        </td>
                                        <td>
                                            <label><input type="radio" name="cdca_familias" value="sim"> sim</label>
                                            <label><input type="radio" name="cdca_familias" value="nao"> n√£o</label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Adultos (entre 18 a 59 anos)</td>
                                        <td>n√£o se aplica</td>
                                        <td>n√£o se aplica</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- 2.6. Formas de acesso -->
                    <div class="form-group">
                        <label>2.6. Formas de acesso dos usu√°rios:</label>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" name="formasAcesso" value="Procura espont√¢nea">
                                <label>Procura espont√¢nea</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="formasAcesso" value="Busca ativa">
                                <label>Busca ativa</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="formasAcesso" value="Encaminhamento CRAS">
                                <label>Encaminhamento CRAS</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="formasAcesso" value="Encaminhamento CREAS">
                                <label>Encaminhamento CREAS</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="formasAcesso" value="Encaminhamento Conselho Tutelar">
                                <label>Encaminhamento Conselho Tutelar</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="formasAcesso" value="Encaminhamento Poder Judici√°rio">
                                <label>Encaminhamento Poder Judici√°rio</label>
                            </div>
                        </div>
                    </div>

                    <!-- 2.7. Recursos humanos -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="num_voluntarios">2.7. N¬∫ de volunt√°rios:</label>
                            <input type="number" id="num_voluntarios" name="num_voluntarios" min="0">
                        </div>
                        <div class="form-group">
                            <label for="num_contratados">N¬∫ de contratados:</label>
                            <input type="number" id="num_contratados" name="num_contratados" min="0">
                        </div>
                    </div>

                    <!-- 2.8. Especialidades -->
                    <div class="form-group">
                        <label>2.8. Especialidades que atuam na oferta socioassistencial:</label>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="assistente social">
                                <label>assistente social</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="psic√≥logo">
                                <label>psic√≥logo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="pedagogo">
                                <label>pedagogo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="terapeuta ocupacional">
                                <label>terapeuta ocupacional</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="profissional do direito">
                                <label>profissional do direito</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="cuidador social">
                                <label>cuidador social (n√≠vel m√©dio)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="auxiliar administrativo">
                                <label>auxiliar administrativo (n√≠vel m√©dio)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" name="especialidades" value="agente social">
                                <label>agente social (n√≠vel m√©dio)</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="outras_especialidades">outros:</label>
                            <input type="text" id="outras_especialidades" name="outras_especialidades" placeholder="Especifique outras especialidades">
                        </div>
                    </div>

                    <!-- 2.9. Infraestrutura -->
                    <div class="form-group">
                        <label>2.9. Infraestrutura:</label>
                        
                        <div class="form-group">
                            <label>a) O Espa√ßo √©:</label>
                            <div class="radio-group">
                                <label><input type="radio" name="tipo_espaco" value="pr√≥prio"> pr√≥prio</label>
                                <label><input type="radio" name="tipo_espaco" value="alugado"> alugado</label>
                                <label><input type="radio" name="tipo_espaco" value="cedido"> cedido</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>b) Atende aos crit√©rios de acessibilidade?</label>
                            <div class="radio-group">
                                <label><input type="radio" name="acessibilidade" value="sim"> sim</label>
                                <label><input type="radio" name="acessibilidade" value="nao"> n√£o</label>
                            </div>
                            <div class="form-group">
                                <label for="obs_acessibilidade">Observa√ß√µes:</label>
                                <textarea id="obs_acessibilidade" name="obs_acessibilidade" rows="2"></textarea>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>c) Compartilha o espa√ßo com outros servi√ßos?</label>
                            <div class="radio-group">
                                <label><input type="radio" name="compartilha_espaco" value="sim"> sim</label>
                                <label><input type="radio" name="compartilha_espaco" value="nao"> n√£o</label>
                            </div>
                            <div class="form-group">
                                <label for="obs_compartilhamento">Observa√ß√µes:</label>
                                <textarea id="obs_compartilhamento" name="obs_compartilhamento" rows="2"></textarea>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>d) O espa√ßo atende de forma satisfat√≥ria a execu√ß√£o da oferta socioassistencial?</label>
                            <div class="radio-group">
                                <label><input type="radio" name="espaco_satisfatorio" value="sim"> sim</label>
                                <label><input type="radio" name="espaco_satisfatorio" value="nao"> n√£o</label>
                            </div>
                            <div class="form-group">
                                <label for="obs_espaco">Observa√ß√µes:</label>
                                <textarea id="obs_espaco" name="obs_espaco" rows="2"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 2.10. Do car√°ter cont√≠nuo e permanente -->
                    <div class="form-group">
                        <label>2.10. Do car√°ter cont√≠nuo e permanente:</label>
                        
                        <div class="form-group">
                            <label>a) Possui atividades de Dezembro a Dezembro?</label>
                            <div class="radio-group">
                                <label><input type="radio" name="atividades_continuas" value="sim"> sim</label>
                                <label><input type="radio" name="atividades_continuas" value="nao"> n√£o</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>b) Possui recesso/f√©rias coletivas?</label>
                            <div class="radio-group">
                                <label><input type="radio" name="recesso_ferias" value="sim"> sim</label>
                                <label><input type="radio" name="recesso_ferias" value="nao"> n√£o</label>
                            </div>
                        </div>
                    </div>

                    <!-- 2.11. A√ß√µes gratuitas -->
